# _Εργασία 3<sup>ου</sup> Εργαστηρίου Αρχιτεκτονικής Υπολογιστών_

## ΤΗΜΜΥ 2020-2021

## Ομάδα 14

## Συγγραφείς 
- **Κινούς Αλέξανδρος**  
***ΑΕΜ: 8834***

- **Βαλαώρα Βασιλεία**  
***ΑΕΜ: 8657***

## Περιεχόμενα:

> [**_Βήμα 1<sup>ο</sup> - Εξοικείωση με τον εξομοιωτή McPAT_**](#εξοικείωση-με-τον-εξομοιωτή-mcpat)
>
>    > 1) [Ερμηνεία αποτελεσμάτων από McPAT για τον επεξεργαστή Xeon](#1-ερμηνεία-αποτελεσμάτων-από-mcpat-για-τον-επεξεργαστή-xeon)
>    >
>    > 2) [Παράδειγμα με χρήση δύο επεξεργαστών ισχύος 4 Watt και 40 Watt αντίστοιχα](#2-παράδειγμα-με-χρήση-δύο-επεξεργαστών-ισχύος-4-watt-και-40-watt-αντίστοιχα)
>    >
>    > 3) [Αντιπαράθεση του Xeon και του ARM A9](#3-αντιπαράθεση-του-xeon-και-του-arm-a9)
>
> [**_Βήμα 2<sup>ο</sup> - gem5 & McPAT: αναζητώντας τη βελτιστοποίηση του γινομένου EDP_**](#gem5-mcpat-αναζητώντας-τη-βελτιστοποίηση-του-γινομένου-edp)
>
> [**Κριτική Εργασίας**](#κριτική-εργασίας)



# Εξοικείωση με τον εξομοιωτή McPAT

Το **McPAT** (**M**ulti**c**ore **P**ower, **A**rea, and **T**iming) αποτελεί ένα εργαλείο ***εξομοίωσης*** **ισχύος**, **χώρου** και **χρονισμού** για πολυπύρηνες και πολυνηματικές αρχιτεκτονικές επεξεργαστών. Μέσω της μοντελοποίησης που πραγματοποιείται, παράγονται εκτιμήσεις για την κατανάλωση ισχύος, το μέγεθος ολοκλήρωσης και τον χρονισμό κυκλωμάτων τεχνολογίας από *90nm* έως και *22nm*. Ακόμη, στο McPAT υπάρχουν τα μοντέλα των επεξεργαστών, τα δίκτυα επικοινωνίας, οι κοινόχρηστες μνήμες Cache, καθώς και οι ελεγκτές μνήμης.  

Το McPAT εγκαθίσταται, αφού πρώτα δημιουργηθεί "κλώνος" του από το GitHub Repository με την παρακάτω εντολή.  

    git clone https://github.com/kingmouf/cmcpat.git my_mcpat  

Στην περίπτωσή μας, προκειμένου να υλοποιηθεί σωστά το build του McPAT, εγκαταστάθηκαν και τα παρακάτω πακέτα.  

    sudo apt install libc6-dev-i386
    sudo apt install gcc-7-multilib g++-7-multilib  

Στη συνέχεια, ακολουθεί διερεύνηση με χρήση των αρχείων ***xml*** που βρίσκονται στον φάκελο `~/my_mcpat/mcpat/ProcessorDescriptionFiles`. Τα εν λόγω αρχεία αναφέρονται σε διαφορετικά μοντέλα επεξεργαστών και αποτελούν περιγραφές αυτών.



## 1. Ερμηνεία αποτελεσμάτων από McPAT για τον επεξεργαστή Xeon

Με την επόμενη εντολή, εκτυπώνονται στην κονσόλα με την μέγιστη δυνατή λεπτομέρεια, εξού και το `5` στο `-print_level 5`, τα αποτελέσματα εξομοίωσης του McPAT για τον επεξεργαστή ***Xeon***.

    ./mcpat -infile ProcessorDescriptionFiles/Xeon.xml -print_level 5  

Συγκεκριμένα, στην αρχή των αποτελεσμάτων, παρατηρούμε τα εξής:  

>***Processor***:
>* *Area = 410.507 mm<sup>2</sup>*
>* *Peak Power = 134.938 W*
>* *Total Leakage = 36.8319 W*
>* *Peak Dynamic = 98.1063 W*
>* *Subthreshold Leakage = 35.1632 W*
>* *Subthreshold Leakage with power gating = 16.3977 W*
>* *Gate Leakage = 1.66871 W*
>* *Runtime Dynamic = 72.9199 W*

Λαμβάνοντας υπόψιν τα παραπάνω και έπειτα από σχετική αναζήτηση, συμπεραίνουμε πως:  
`Peak Power  ~=  Peak Dynamic  +  Total Leakage` και  
`Total Leakage  =  Subthreshold Leakage  +  Gate Leakage`

Με άλλα λόγια, η **ισχύς** που καταναλώνεται σε έναν επεξεργαστή διακρίνεται σε ***dynamic*** ή ***switching*** power, καθώς και σε ***leakage*** ή ***static*** power. 
* H δυναμική ισχύς (*dynamic power*) είναι η ισχύς που καταλώνεται κατά την αλλαγή της κατάστασης των κυκλωμάτων του επεξεργαστή, καθώς οι λογικές πύλες αυτών πάλλονται. Προκειμένου να συμβούν οι εν λόγω αλλαγές κατάστασης, χωρητικά φορτία φορτίζονται και εκφορτίζονται δαπανώντας ενέργεια. Η δυναμική κατανάλωση είναι ανάλογη της συχνότητας ρολογιού, της συνολικής χωρητικότητας φορτίου και της τάσης τροφοδοσίας. Όσο αυξάνεται η επίδοση (ταχύτητα και συχνότητα) του ολοκληρωμένου κυκλώματος τόσο αυξάνεται και η δυναμική ισχύς. 
* Το *leakage power* οφείλεται στην απώλεια ενέργειας λόγω διάχυσης από τα τρανζίστορ του επεξεργαστή και εξαρτάται από τα κατασκευαστικά χαρακτηριστικά αυτών. Η κατασκευή των τρανζίστορ χαρακτηρίζεται από "φυσικές ατέλειες" οι οποίες είναι και ο λόγος ύπαρξης της στατικής κατανάλωσης ισχύος. Διακρίνουμε δύο είδη *leakage power*, 
  * το ***subthreshold leakage*** (διαρροή υποστρώματος) το οποίο εντοπίζεται μεταξύ πηγής (*source*) και εκπομπού (*drain*) των τρανζίστορ και οφείλεται στην πολύ μικρή ποσότητα ρεύματος που ρέει ανάμεσα και 
  * το ***gate leakage*** (διαρροή πύλης) που οφείλεται σε μικρή ποσότητα ρεύματος που διαρρέει την πύλη των τρανζίστορ.  

Θα μπορούσαμε να πούμε πώς τα κυκλώματα ενός επεξεργαστή καταναλώνουν ισχύ τόσο κατά την μεταβολή (***dynamic***) όσο και γαι την διατήρηση (***static***) της κατάστασσής τους.

## 2. Παράδειγμα με χρήση δύο επεξεργαστών ισχύος 4 Watt και 40 Watt αντίστοιχα




## 3. Αντιπαράθεση του Xeon και του ARM A9




# gem5 McPAT αναζητώντας τη βελτιστοποίηση του γινομένου EDP




# Κριτική Εργασίας
